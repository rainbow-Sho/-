<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ¡å†…æ¡ˆå†…ãƒãƒƒãƒ—</title>
    <style>
        /* è¦‹ãŸç›®ï¼ˆå‰å›ã¨åŒã˜ï¼‰ */
        body { font-family: sans-serif; text-align: center; background-color: #f0f8ff; padding: 10px; }
        .control-panel { background: white; padding: 20px; border-radius: 10px; max-width: 500px; margin: 0 auto 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        select { font-size: 16px; padding: 5px; margin: 5px; width: 80%; }
        .bf-check { margin: 10px 0; font-weight: bold; color: #0056b3; }
        .search-btn { background-color: #ff9900; color: white; border: none; padding: 10px 30px; font-size: 18px; border-radius: 20px; cursor: pointer; font-weight: bold; }
        .search-btn:hover { background-color: #e68a00; }
        #screen { margin: 0 auto; max-width: 600px; background: #333; padding: 10px; border-radius: 5px; min-height: 300px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        img { max-width: 100%; height: auto; border: 1px solid #fff; }
        #caption { color: white; font-size: 18px; margin-top: 10px; }
        .nav-btns { margin-top: 15px; }
        .nav-btns button { padding: 10px 20px; font-size: 16px; margin: 0 5px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>ğŸ« æ ¡å†…ãƒ«ãƒ¼ãƒˆæ¡ˆå†…</h1>

    <div class="control-panel">
        <label>å‡ºç™ºï¼š
            <select id="startSelect">
                <option value="A-3E">3-E</option>
                <option value="B">è©•è­°ä¼šå®¤</option>
                <option value="Gate">æ­£é–€</option>
            </select>
        </label>
        <br>
        <label>åˆ°ç€ï¼š
            <select id="goalSelect">
                <option value="A">3-E</option>
                <option value="é¸æŠæ•™å®¤IV">é¸æŠæ•™å®¤IV</option>
                <option value="ç’°å¢ƒç‰©è³ªåŒ–å­¦å®Ÿé¨“å®¤">ç’°å¢ƒç‰©è³ªåŒ–å­¦å®Ÿé¨“å®¤</option>
                <option value="Gym">ä½“è‚²é¤¨</option>
            </select>
        </label>
        
        <div class="bf-check">
            <label><input type="checkbox" id="checkBF"> ãƒãƒªã‚¢ãƒ•ãƒªãƒ¼ï¼ˆéšæ®µãªã—ï¼‰</label>
        </div>

        <button class="search-btn" onclick="searchRoute()">ãƒ«ãƒ¼ãƒˆæ¤œç´¢</button>
    </div>

    <div id="screen">
        <img id="naviPhoto" src="" alt="æ¡ˆå†…å†™çœŸ" style="display:none;">
        <p id="caption">ãƒ«ãƒ¼ãƒˆã‚’é¸ã‚“ã§æ¤œç´¢ã—ã¦ãã ã•ã„</p>
    </div>

    <div class="nav-btns">
        <button onclick="prevPhoto()">â—€ æˆ»ã‚‹</button>
        <button onclick="nextPhoto()">é€²ã‚€ â–¶</button>
    </div>

    <script>
        // æ•™é¤Šæ£Ÿ:A å°‚é–€æ£Ÿ1:B å°‚é–€æ£Ÿ2:C å°‚é–€æ£Ÿ:S éšæ®µ:ST å…¥å£:EN å‡ºå£:EX

        // 1. ã€éƒ¨å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€‘
        // ã€ŒAæ£Ÿã‹ã‚‰å‡ºã‚‹ã€ã€Œæ¸¡ã‚Šå»Šä¸‹ã€ã€ŒBæ£Ÿã«å…¥ã‚‹ã€ãªã©ã®ç´°ã‹ã„ãƒ‘ãƒ¼ãƒ„ã‚’ä½œã‚Šã¾ã™
        // â€» bf: null ã¨æ›¸ãã¨ã€normalã¨åŒã˜å†™çœŸã‚’ä½¿ã„ã¾ã™ï¼ˆå…±é€šã®å ´åˆï¼‰
        const parts = {
            // æ•™é¤Šæ£Ÿé–¢ä¿‚
            "A(3F)_exit": {
                normal: ["A(3F).jpeg", "A(3F)_ST.jpeg","A(2F)_ST_EX.jpeg"],
                bf:     null
            },
            "A_exit": {
                normal: ["A(2F)_To_EX.jpeg", "A(2F)_EX.jpeg"],
                bf:     null
            },
            "A_enter": {
                normal: ["a_shoes.jpg", "a_enter_stairs.jpg"],
                bf:     ["a_shoes_slope.jpg", "a_enter_elevator.jpg"]
            },
            
            // å°‚é–€æ£Ÿé–¢ä¿‚
            "B_exit": {
                normal: ["b_exit_stairs.jpg"],
                bf:     ["b_exit_elevator.jpg"]
            },
            "B_enter": {
                normal: ["b_shoes.jpg", "b_enter_stairs.jpg"],
                bf:     ["b_shoes_slope.jpg", "b_enter_elevator.jpg"]
            },
            "C_enter": {
                normal: ["C(2F)_enter.jpg", "C(2F).jpg"],
                bf:     null
            },
            "S_enter": {
                normal: ["S_enter.JPG"],
                bf:     null
            },
            //å°‚é–€æ£Ÿå…¥ã‚‹ã¨ã“ã‚ã®å†™çœŸãŒãªã„

            // ã¤ãªãã®é“ï¼ˆå…±é€šãƒ‘ãƒ¼ãƒ„ï¼‰
            "Road_A_to_S": {
                normal: ["A_to_S.jpeg"],
                bf:     ["A_to_S.jpeg","senmontou_Slope.jpeg"],
            },
            "Road_Gate_to_A": {
                normal: ["gate.jpg", "tree_road.jpg"],
                bf:     null
            },

            //æ•™å®¤é–¢é€£
            "è©•è­°ä¼šå®¤": {
                normal:["Hyougikai_room.jpeg"],
                bf:     null
            },
            "é¸æŠæ•™å®¤IV": {
                normal:["é¸æŠæ•™å®¤IV.JPG"],
                bf:     null
            },
            "ç’°å¢ƒç‰©è³ªåŒ–å­¦å®Ÿé¨“å®¤": {
                normal:["ç’°å¢ƒç‰©è³ªåŒ–å­¦å®Ÿé¨“å®¤.JPG"],
                bf:     null
            }

        };

        // 2. ã€ãƒ«ãƒ¼ãƒˆã®è¨­è¨ˆå›³ã€‘
        // ã©ã®éƒ¨å“ã‚’ã€ã©ã®é †ç•ªã§ãã£ã¤ã‘ã‚‹ã‹ã‚’å®šç¾©ã—ã¾ã™
        // åå‰ã¯ã€Œå‡ºç™º_to_åˆ°ç€ã€ã®ãƒ«ãƒ¼ãƒ«ã§æ±ºã‚ã¾ã™
        const routePatterns = {
            "A-3E_to_é¸æŠæ•™å®¤IV": ["A(3F)_exit","A_exit", "Road_A_to_S", "S_enter","C_enter","é¸æŠæ•™å®¤IV"],
            "A-3E_to_ç’°å¢ƒç‰©è³ªåŒ–å­¦å®Ÿé¨“å®¤": ["A(3F)_exit","A_exit", "Road_A_to_S", "S_enter","C_enter","ç’°å¢ƒç‰©è³ªåŒ–å­¦å®Ÿé¨“å®¤"],
            "B_to_A": ["B_exit", "Road_A_to_B", "A_enter"], // é€†ã‚‚éƒ¨å“ã•ãˆã‚ã‚Œã°ç°¡å˜ï¼
            "Gate_to_A": ["Road_Gate_to_A", "A_enter"],
            // å¿…è¦ãªçµ„ã¿åˆã‚ã›ã‚’ã“ã“ã«è¶³ã—ã¦ã„ã
        };


        // --- ã“ã‚Œä»¥é™ã¯å¤‰æ›´ã—ãªãã¦OKï¼ˆè‡ªå‹•å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ï¼‰ ---

        let currentPhotos = [];
        let currentIndex = 0;

        function searchRoute() {
            const start = document.getElementById("startSelect").value;
            const goal = document.getElementById("goalSelect").value;
            const isBF = document.getElementById("checkBF").checked;

            if (start === goal) {
                alert("å‡ºç™ºåœ°ã¨ç›®çš„åœ°ãŒåŒã˜ã§ã™");
                return;
            }

            // ã‚­ãƒ¼ã‚’ä½œæˆï¼ˆä¾‹: "A_to_B"ï¼‰
            const key = start + "_to_" + goal;

            // è¨­è¨ˆå›³ãŒã‚ã‚‹ã‹ç¢ºèª
            if (routePatterns[key]) {
                // â˜…ã“ã“ãŒçµåˆãƒ­ãƒœãƒƒãƒˆã®ä»•äº‹â˜…
                // è¨­è¨ˆå›³ã«æ›¸ã‹ã‚ŒãŸéƒ¨å“åã‚’é †ç•ªã«è¦‹ã¦ã€å†™çœŸã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¦ã„ã
                let combinedPhotos = [];
                
                // è¨­è¨ˆå›³ï¼ˆé…åˆ—ï¼‰ã‚’ãƒ«ãƒ¼ãƒ—å‡¦ç†
                const partsList = routePatterns[key];
                for (let i = 0; i < partsList.length; i++) {
                    const partName = partsList[i]; // "A_exit" ãªã©
                    const partData = parts[partName]; // ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã™

                    if (!partData) {
                        console.error("éƒ¨å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: " + partName);
                        continue;
                    }

                    // ãƒãƒªã‚¢ãƒ•ãƒªãƒ¼ã‹é€šå¸¸ã‹ã§ä½¿ã†å†™çœŸãƒªã‚¹ãƒˆã‚’æ±ºã‚ã‚‹
                    let photosToAdd;
                    if (isBF && partData.bf !== null) {
                        photosToAdd = partData.bf; // BFç”¨ã®å†™çœŸãŒã‚ã‚‹ãªã‚‰ãã‚Œã‚’ä½¿ã†
                    } else {
                        photosToAdd = partData.normal; // ãªã„ãªã‚‰é€šå¸¸ç”¨ï¼ˆã¾ãŸã¯å…±é€šï¼‰ã‚’ä½¿ã†
                    }

                    // ãƒªã‚¹ãƒˆã‚’çµåˆï¼ˆconcatï¼‰
                    combinedPhotos = combinedPhotos.concat(photosToAdd);
                }

                currentPhotos = combinedPhotos;
                currentIndex = 0;
                
                // ç”»é¢æ›´æ–°
                document.getElementById("caption").innerText = isBF ? "ãƒãƒªã‚¢ãƒ•ãƒªãƒ¼ãƒ«ãƒ¼ãƒˆæ¡ˆå†…" : "é€šå¸¸ãƒ«ãƒ¼ãƒˆæ¡ˆå†…";
                showPhoto();

            } else {
                alert("ãã®ãƒ«ãƒ¼ãƒˆï¼ˆ" + key + "ï¼‰ã¯ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
                document.getElementById("naviPhoto").style.display = "none";
            }
        }

        function showPhoto() {
            if (currentPhotos.length > 0) {
                document.getElementById("naviPhoto").src = currentPhotos[currentIndex];
                document.getElementById("naviPhoto").style.display = "block";
            }
        }

        function nextPhoto() {
            if (currentPhotos.length === 0) return;
            if (currentIndex < currentPhotos.length - 1) {
                currentIndex++;
                showPhoto();
            } else {
                alert("åˆ°ç€ï¼");
            }
        }

        function prevPhoto() {
            if (currentPhotos.length === 0) return;
            if (currentIndex > 0) {
                currentIndex--;
                showPhoto();
            }
        }
    </script>
</body>
</html>
